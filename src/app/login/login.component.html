<div class="row m-0 h-100">
    <ng-container *ngIf="!loader?.login && !loader?.formPage">
        <div class="col-lg-8 p-l-0" id="loginImage">
        </div>
        <div class="col-lg-4 p-5 loginFormSpacing h-100">
            <div class="col-md-12 pt-5 adnoc-logo" *ngIf="pageType === 'normalLogin'">
                <img class="icons" src="assets/images/adnoc-logo-new.svg" alt="ADNOC">
            </div>
            <div class="col-md-12" *ngIf="pageType === 'normalLogin'">
                <label class="info">Log in to Unified Cathodic Protection</label>
            </div>
            <h4 class="label-sign-in" *ngIf="pageType === 'forgotPassword'">Forgot Password</h4>
            <h4 class="label-sign-in" *ngIf="pageType === 'updatePassword'">Update Password</h4>
            <div class="fieldView col-md-12">
                <form [formGroup]="loginForm" *ngIf="loginForm">
                    <div class="form-group">
                        <label class="required form-design">User ID</label>
                        <input type="text" ucpWhiteSpaceRestrictor class="form-control" placeholder="Enter your User ID" id="loginUserID"
                            [(ngModel)]="userDet.username" formControlName="username"
                            [ngClass]="{ 'is-invalid': f['username'].dirty && f['username']['errors'] }">
                        <div *ngIf="f['username']['errors'] && f['username'].dirty" class="invalid-feedback pt-1">
                            <span *ngIf="f['username']['errors']['required']">
                                User ID is required.
                            </span>
                        </div>
                    </div>
                    <div class="form-group"
                        *ngIf="pageType === 'updatePassword'">
                        <label class="form-design required">Activation Key</label>
                        <input type="activationKey" class="form-control" placeholder="Enter Activation key"
                            [(ngModel)]="userDet.activationKey" formControlName="activationKey">
                    </div>
                    <div class="form-group"
                        *ngIf="pageType === 'normalLogin' || 'updatePassword' && pageType != 'forgotPassword'">
                        <label class="required form-design" *ngIf="pageType === 'normalLogin'">Password</label>
                        <label class="required form-design" *ngIf="pageType === 'updatePassword'">New
                            Password</label>
                        <span style="float:right;" *ngIf="pageType === 'normalLogin'">
                            <a href="javascript:void(0)" (click)="getCaptcha()">Forgot
                                Password?</a>
                        </span>
                        <input type="password" class="form-control" placeholder="Enter your Password" id="loginPassword"
                            [(ngModel)]="userDet.password" formControlName="password"
                            [ngClass]="{ 'is-invalid': f['password'].dirty && f['password']['errors'] }"
                            autocomplete="off">
                        <div *ngIf="f['password']['errors'] && f['password'].dirty"
                            class="invalid-feedback d-block pt-1">
                            <span *ngIf="f['password']['errors']['required']">
                                Password is required.
                            </span>
                            <span *ngIf="f['password']['errors']['minlength']">
                                Password length must be atleast 8.
                            </span>
                        </div>
                    </div>
                    <div class="col-md-12" *ngIf="pageType === 'updatePassword' && passwordValidator?.length > 0">
                        <ul class="validator-list row m-0 pl-0 pb-2">
                            <ng-container *ngFor="let eachField of passwordValidator; let ind = index">
                                <li class="validator-item col-md-6 pl-0 d-flex" [ngClass]="{ 'is-present': eachField['isPresent'] }">
                                    <span class="material-icons-outlined pr-1 mt-1 color-green fz-1rem"
                                        *ngIf="isregexSatisfies(eachField?.regex)">
                                        done
                                    </span>
                                    <span class="material-icons-outlined pr-1 mt-1 color-red fz-1rem"
                                        *ngIf="!isregexSatisfies(eachField?.regex)">
                                        close
                                    </span>
                                    <span>{{eachField['label']}}</span>
                                </li>
                            </ng-container>
                        </ul>
                    </div>
                    <div class="form-group"
                        *ngIf="pageType === 'updatePassword' ">
                        <label class="required form-design">Confirm Password</label>
                        <input type="password" class="form-control" placeholder="Enter Confirm Password"
                            id="confirmPassword" [(ngModel)]="userDet.confirmPassword" formControlName="confirmPassword"
                            [ngClass]="{ 'is-invalid': f['confirmPassword'].dirty && f['confirmPassword']['errors'] }">
                        <div *ngIf="pageType === 'updatePassword' && f['confirmPassword']['errors'] && f['confirmPassword'].dirty"
                            class="invalid-feedback d-block pt-1">
                            <span *ngIf="f['confirmPassword']['errors']['required']">
                                Confirm Password is required.
                            </span>
                            <span
                                *ngIf="!f?.password?.errors?.required && userDet.password !== userDet.confirmPassword">
                                Confirm Password and New Password both are not same.
                            </span>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary col-md-12" [disabled]="false"
                        *ngIf="pageType === 'normalLogin'" (click)="getToken()">
                        Log In <span><em class="fa fa-spinner fa-spin"></em></span>
                    </button>
                    <!-- <label class="float-left py-3" *ngIf="pageType === 'normalLogin'">
                        <a href="javascript:void(0)" target="_blank" rel="noopener noreferrer">Contact Support</a>
                    </label> -->
                    <div *ngIf="pageType === 'forgotPassword' || 'updatePassword' && pageType != 'normalLogin'">
                        <img [src]="captchaimage" alt="" class="captcha_image" />
                        <span class="material-icons-outlined cursor-pointer" (click)="getCaptcha(true)">autorenew</span>
                    </div>
                    <div class="form-group"
                        *ngIf="pageType === 'forgotPassword' || 'updatePassword' && pageType != 'normalLogin'">
                        <label class="form-design required">Captcha Text</label>
                        <input type="text" class="form-control" placeholder="Enter Captcha"
                            [(ngModel)]="userDet.captcha" formControlName="captcha"
                            [ngClass]="{ 'is-invalid': f['captcha'].dirty && f['captcha']['errors'] }">
                        <div *ngIf="f['captcha']['errors'] &&  f['captcha'].dirty"
                            class="invalid-feedback d-block pt-1">
                            <span *ngIf="f['captcha']['errors']['required']">
                                Captcha Text is required.
                            </span>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary col-md-12" [disabled]="false"
                        *ngIf="pageType === 'forgotPassword'" (click)="forgotPassword()">
                        Send Reset Password Mail <span><em class="fa fa-spinner fa-spin"></em></span>
                    </button>
                    <button type="submit" class="btn btn-primary col-md-12" [disabled]="false"
                        *ngIf="pageType === 'updatePassword'" (click)="resetPassword()">
                        Reset Password<span><em class="fa fa-spinner fa-spin"></em></span>
                    </button>
                    <label class="mt-3"
                        *ngIf="pageType === 'forgotPassword' || 'updatePassword' && pageType != 'normalLogin'">
                        <a href="javascript:void(0)" (click)="changePageType('normalLogin')">Back to Login</a>
                    </label>
                </form>
            </div>
        </div>
    </ng-container>
    <ng-container *ngIf="loader?.login || loader?.formPage">
        <div>
            <div id="loader-wrapper-submaincontent">
                <div class="lds-ring">
                    <div></div>
                    <div></div>
                    <div></div>
                    <div></div>
                </div>
            </div>
        </div>
    </ng-container>
</div>